# Strategy

![Strategy Overview Diagram](diagrams/strategy_overview.digraph.svg)

## Overview

The Python Controller continuously scans for arbitrage opportunities using data sources such as the DEX API to fetch token prices and other relevant information. When a profitable trade is identified, it triggers the smart contract defined in FlashLoanArbitrage.sol to execute the trade. The smart contract interacts with the Flash Loan Provider to borrow funds and the DEX to swap Token A for Token B and then back to Token A. Finally, the smart contract repays the flash loan and retains the profit.

![System Overview Diagram](diagrams/system_overview.digraph.svg)

## Components

### Python Controller

* The Python Controller is responsible for scanning the DEX API for arbitrage opportunities.
* It interacts with the Binance Smart Chain (BSC) using Alchemy.
* It triggers the smart contract to execute the trade when a profitable opportunity is identified.
* The Python Controller is deployed on a server to run continuously.

#### Identify Arbitrage Opportunities

The Python Controller continuously scans for profitable arbitrage opportunities by analyzing token prices across trading pairs on PancakeSwap. The process involves the following steps:

1. **Fetch Real-Time Data**:
   - Use PancakeSwap's API to retrieve the latest prices for relevant token pairs (e.g., Token A/B and Token B/C).

2. **Analyze Price Discrepancies**:
   - Compare the prices of token pairs to identify potential arbitrage opportunities.
   - Calculate the expected profit for each identified opportunity.

3. **Evaluate Profitability**:
   - Consider transaction fees, slippage, and other factors to determine the net profit.
   - Filter out opportunities that do not meet the profitability threshold.

4. **Log Opportunities**:
   - Record all identified arbitrage opportunities with details such as token pairs, expected profit, and execution parameters.
   - Use this data for performance analysis and system optimization.

5. **Trigger Execution**:
   - If a profitable opportunity is identified, the Python Controller calls the smart contract to execute the trade atomically.

### FlashLoanArbitrage.sol

* The FlashLoanArbitrage.sol smart contract is the relay between the Python Controller and the DEX.
* It uses PancakeSwap v4 as the DEX, and the AAVE flash loan provider to borrow funds.
* The smart contract is deployed on the Binance Smart Chain (BSC).
* Profit is retained by the smart contract after repaying the flash loan.
* The transaction fails if the profit is not sufficient to cover the flash loan and transaction fees.

### DEX

* PancakeSwap is the DEX of choice for this system. It has substantial liquidity and trading volume, making it a good platform for arbitrage opportunities.
* PancakeSwap is deployed on the Binance Smart Chain (BSC), which offers low transaction fees and fast confirmation times.

### AAVE Flash Loan Provider

* AAVE is used as the flash loan provider for this system.
* Flash loans allow borrowing funds without collateral, provided the loan is repaid within the same transaction.
* AAVE charges a fee for flash loans, which is deducted from the profit generated by the arbitrage trade.